<!DOCTYPE html><html><title>DOC RENDER</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"><style>    .content {        width: 70%;        float: left;        overflow: auto;    }    .toc {        width: 30%;        float: right;        position: sticky;        top: 0;        height: 100vh; /* Full viewport height */        overflow: hidden; /* Hide overflow to prevent outer scroll */    }    .toc-inner {        height: 100%;        overflow-y: auto; /* Enable vertical scrolling within TOC */    }    .orientation-message {        display: none;        position: fixed;        top: 0;        left: 0;        width: 100%;        height: 100%;        background: rgba(255, 255, 255, 0.9);        text-align: center;        padding-top: 40vh;        font-size: 2em;        z-index: 1000;    }    .highlight {        background-color: yellow;    }</style><body><div class="w3-container">    <div class="content w3-padding">        {{ html_content | safe }}    </div>    <div class="toc w3-padding w3-card">        <div class="toc-inner">            <br>            <a class="w3-text-blue" href="/">Загрузить другой файл</a>            <div><h4>СОДЕРЖАНИЕ</h4></div>            {{ toc_links | safe }}        </div>    </div></div><div class="orientation-message w3-text-blue" id="orientationMessage">    <i class="fas fa-rotate-right w3-xxxlarge"></i>    <br>    Пожалуйста, поверните устройство в горизонтальное положение.</div><script>    function checkOrientation() {        var orientationMessage = document.getElementById('orientationMessage');        if (window.innerHeight > window.innerWidth) {            orientationMessage.style.display = 'block';        } else {            orientationMessage.style.display = 'none';        }    }    window.addEventListener('resize', checkOrientation);    window.addEventListener('load', checkOrientation);</script><script>    let previousElements = null;    document.addEventListener('click', function(event) {        // Check if the clicked element is an anchor with href starting with '#'        if (event.target.tagName === 'A' && event.target.href.includes('#')) {            event.preventDefault(); // Prevent default anchor behavior            const anchorId = event.target.href.split('#')[1];            const currentElements = document.querySelectorAll('.' + anchorId);            const targetElement = document.getElementById(anchorId);            // Remove highlight from previous elements if they exist            if (previousElements) {                previousElements.forEach(element => {                    element.classList.remove('highlight');                });            }            // Add highlight to current elements            currentElements.forEach(element => {                element.classList.add('highlight');            });            // Scroll smoothly to the target element            if (targetElement) {                targetElement.scrollIntoView({ behavior: 'smooth' });            }            // Update previous elements to the current elements            previousElements = currentElements;        }    });</script></body></html>